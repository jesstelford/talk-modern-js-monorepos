import { Head } from 'mdx-deck'
import YouTube from './components/youtube'
import styled from 'styled-components'

export { swiss as theme } from 'mdx-deck/themes'

<Head>
  <meta httpEquiv="x-ua-compatible" content="ie=edge" />

  <meta property="og:type" content="article" />
  <meta property="og:title" content="Managing Modern JS Monorepos" />
  <meta property="og:url" content="https://jesstelford.github.io/talk-modern-js-monorepos" />
  <meta property="og:image" content="https://jesstelford.github.io/talk-modern-js-monorepos/card.png" />
  <meta
    property="og:description"
    content='Jess walks us through modern JS monoreops, answering: What are modern JS monorepos? | What are the alternatives to monorepos ("Many Repos"), and their pros/cons? | Which tools are available for managing monorepos | How Jess manages releases from monorepos'
  />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@jesstelford" />
  <meta name="twitter:creator" content="@jesstelford" />
  <meta name="twitter:url" content="https://jesstelford.github.io/talk-modern-js-monorepos" />
  <meta name="twitter:title" content="Managing Modern JS Monorepos" />
  <meta
    name="twitter:description"
    content='Jess walks us through modern JS monoreops, answering: What are modern JS monorepos? | What are the alternatives to monorepos ("Many Repos"), and their pros/cons? | Which tools are available for managing monorepos | How Jess manages releases from monorepos'
  />
  <meta name="twitter:image" content="https://jesstelford.github.io/talk-modern-js-monorepos/card.png" />

  <link rel="author" href="https://twitter.com/jesstelford" />
  <meta itemProp="name" content="Managing Modern JS Monorepos" />
  <meta
    itemProp="description"
    content='Jess walks us through modern JS monoreops, answering: What are modern JS monorepos? | What are the alternatives to monorepos ("Many Repos"), and their pros/cons? | Which tools are available for managing monorepos | How Jess manages releases from monorepos'
  />
  <meta itemProp="image" content="https://jesstelford.github.io/talk-modern-js-monorepos/card.png" />
  <title>Managing Modern JS Monorepos</title>
</Head>

# Managing Modern JS Monorepos

ðŸ‘‹ [@jesstelford](https://mobile.twitter.com/jesstelford)

<YouTube videoId="frkWLW3CCVE" opts={{ width: null, height: null }} />

```notes
- Create speaker notes in fenced code blocks
```

---

## Single Package Repos

#### aka _Many-Repos_

---

### Tools for Many-Repos

- `yarn`
- `np`
- Most other things on `npm`

---

### Many-repo flow

`Code -> Commit -> PR -> Publish`

---

### âš  Problems with Many-Repos

- Managing lots of packages is tricky
- Large effort to publish
- Version syncing is tricky

---

## Monorepos are the solution! ðŸŽ‰

---

### Many vs Mono

---

### Many

âœ… git history<br />
âœ… no merge conflicts<br />
âœ… easier onboarding / contributing<br />
âœ… less tooling

---

### Many

ðŸš« duplicate `node_modules` (yarn PNP might help)<br />
ðŸš« managing publishing for related deps<br />
ðŸš« disconnected git histories<br />
ðŸš« multiple PRs

---

### Mono

âœ… Single codebase<br />
âœ… single PRs for many packages<br />
âœ… single integration test point<br />
âœ… Single `node_modules`

---

### Mono

ðŸš« huge repos<br />
ðŸš« mixed git history<br />
ðŸš« more tooling<br />
ðŸš« difficult onboarding

---

## Many in a Mono

`Code -> Commit -> PR -> Publish`

becomes

`cd [package-dir] -> Code -> Commit -> PR -> Publish`

```notes
- To alleviate some of the pains of Many-repos
- Treat each folder like its own repo for publishing
- But cumbersome / slow / error prone
```

---

### Many in a Mono

âœ… less tooling<br />
âœ… Single codebase<br />
âœ… single PRs for many packages<br />
âœ… single integration test point<br />
âœ… single `node_modules`

---

### Many in a Mono

ðŸš« managing publishing for related deps<br />
ðŸš« huge repos<br />
ðŸš« mixed git history<br />
ðŸš« difficult onboarding

---

## Tools for Monorepos

- lerna
- yarn workspaces
- bolt

---

## `Bolt`

```notes
- setting up
- demo?
```

---

### `Bolt`

âœ… Single codebase<br />
âœ… single PRs for many packages<br />
âœ… single integration test point<br />
âœ… single `node_modules`

---

### `Bolt`

ðŸš« managing publishing for related deps<br />
ðŸš« huge repos<br />
ðŸš« mixed git history<br />
ðŸš« more tooling

```notes
- onboarding is simplified
```

---

## Publishing from a Bolt monorepo

---

**`@atlaskit/build-releases`**

1. `yarn build-releases changeset`
2. `yarn build-releases version`
3. `yarn build-releases publish`

```notes
- Works great with PRs
```

---

### `Bolt` + `@atlaskit/build-releases`

âœ… Single codebase<br />
âœ… single PRs for many packages<br />
âœ… single integration test point<br />
âœ… single `node_modules`<br />
âœ… Easy publish<br />
ðŸš« huge repos<br />
ðŸš« more tooling

```notes
- git history is less important thanks to changelogs
- publishing is simple!
```

---

## Monorepo tools

- `bolt` | [boltpkg.com](http://boltpkg.com/)
- `@atlaskit/build-releases` | [npm/@atlaskit/build-releases](https://www.npmjs.com/package/@atlaskit/build-releases)

---

# <https://cete.io>
